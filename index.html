<!DOCTYPE HTML>
<head>
<title>smoky video controlled by hand</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="styleSheet.css" rel="stylesheet" type="text/css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/p5.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/addons/p5.dom.min.js"></script>
  	<script src="https://unpkg.com/ml5@0.3.1/dist/ml5.min.js" type="text/javascript"></script>
  	<script src="smoke.js"></script>
  	
</head>

<button id = start-button>Play</button>
<div class="container">
	<canvas class="canvas" id="canvas" ></canvas>
	<div id="top" class="top">
		<div id="videoContainer" class = "main"></div>
		<video class="video" id="nature" controls>
	 	 <source src="https://www.youtube.com/embed/BgRwb_qv1KY" type="video/mp4">
	 	 Your browser does not support the video tag.
		</video>
	</div>
</div>


<script>
	var flag = 0;
	const startBtn = document.getElementById("start-button");

	startBtn.addEventListener('click', start);

	function start(){
		flag = 1;
		nature.play();
		startBtn.style.visibility = "hidden";
		console.log("success");
	}

	canvas = document.getElementById('canvas')
	ctx = canvas.getContext('2d')
	v = document.getElementById('nature');

	canvas.width = innerWidth;
	canvas.height = innerHeight;
	//console.log(canvas.width);
	

	var party = smokemachine(ctx, [255, 255, 255])
	party.start() // start animating
	party.setPreDrawCallback(function(dt){
		party.addSmoke(innerWidth*Math.random(), innerHeight, .5)
		canvas.width = innerWidth
		canvas.height = innerHeight

	})


	// party.addsmoke(innerWidth/2, innerHeight, 100)
	// onclick=e => {
	// 	console.log(e)
	// 	party.step()
	// }

	onmousemove = function (e){

		// var xD = e.clientX;
		// var yD = e.clientY;
		// party.fleeParticles(xD,yD)

		var x = Math.random()*canvas.width
		var y = Math.random()*canvas.height
		//console.log("move")
		//var y = e.clientY+
		var n = .5
		var t = Math.floor(Math.random() * 200) + 1000 // start time
		party.addsmoke(x, y, n, t)
	}
	/*onmousemove = function (e) {
		//var x = e.clientX+Math.random()*canvas.width
		var x = Math.random()*canvas.width
		var y = Math.random()*canvas.height
		console.log(x)
		console.log(y)
		//var y = e.clientY+
		var n = .5
		var t = Math.floor(Math.random() * 200) + 1000 // start time
		party.addsmoke(x, y, n, t)
	}*/



</script>
<script src="sketch.js"></script> 

